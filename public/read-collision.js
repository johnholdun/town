// Generated by CoffeeScript 1.7.1
(function() {
  addEventListener("load", function() {
    var canvas, collision, collisionText, context, data, i, img, pixel, textarea, width, x, y;
    canvas = document.querySelector("canvas");
    img = document.querySelector("img");
    textarea = document.querySelector("textarea");
    context = canvas.getContext("2d");
    context.drawImage(img, 0, 0);
    data = context.getImageData(0, 0, parseInt(canvas.getAttribute("width"), 10), parseInt(canvas.getAttribute("height"), 10)).data;
    collision = [];
    width = parseInt(img.getAttribute("width", 10));
    i = 0;
    while (i < data.length) {
      pixel = Math.floor(i / 4);
      y = Math.floor(pixel / width);
      x = pixel - (y * width);
      if (x === 0) {
        collision[y] = [];
      }
      collision[y][x] = data[i] === 255;
      i += 4;
    }
    collisionText = "";
    _.each(collision, function(row) {
      _.each(row, function(cell) {
        return collisionText += cell ? 1 : 0;
      });
      return collisionText += "\n";
    });
    return textarea.innerText = collisionText;
  });

}).call(this);
